data(mtcars)
head(mtcars)
K <- 5
index <- rep(1:K, floor(nrow(mtcars)/K)+1)[1:nrow(mtcars)]
index
univar.cor <- apply(training[, 2:ncol(training)], 2, function(var, mpg=training$mpg) cor (var, mpg)ï¼‰
univar.cor <- apply(training[, 2:ncol(training)], 2, function(var, mpg=training$mpg) cor (var, mpg))
training = mtcars
univar.cor <- apply(training[, 2:ncol(training)], 2, function(var, mpg=training$mpg) cor (var, mpg)
)
univar.cor
training[, 2:ncol(training)]
apply(training[, 2:ncol(training)], 2,mean)
apply(training[, 2:ncol(training)], 1,mean)
uapply(training[, 2:ncol(training)], 2, function(var, mpg=training$mpg) cor (var, mpg))
apply(training[, 2:ncol(training)], 2, function(var, mpg=training$mpg) cor (var, mpg))
apply(training[, 2:ncol(training)], 2,  cor (var, training$mpg))
apply(training[, 2:ncol(training)], 2, function(var) cor (var, training$
mpg))
var.names <- tail(names(sort(abs(univar.cor))), 3)
sort(abs(univar.cor))
names(sort(abs(univar.cor)))
tail(names(sort(abs(univar.cor))), 3)
set.seed(25112016)
N <- 100
x <- rnorm(N)
y <- 0.25+x+rnorm(N, sd=0.5)
p <- pnorm(y)
outcome <- round(p)
my_data <- data.frame(x, outcome)
write.csv(my_data, "0_data/ex_2.csv", row.names=F)
N <- length(outcome)
l.predict <- numeric(N)
p.predict <- numeric(N)
for (i in 1:N){
training <- my_data[-i, ]
test <- my_data[i, ]
l.predict[i] <- round(predict(glm(outcome~x, binomial(link="logit"), data=training), newdata=test, type='response'))
p.predict[i] <- round(predict(glm(outcome~x, binomial(link="probit"), data=training), newdata=test, type='response'))
}
mean(my_data$outcome!=l.predict)
mean(my_data$outcome!=p.predict)
?glm
Duncan$prestige
library(car)
Duncan$prestige
y <- Duncan$prestige
X <- cbind(rep(1, 45),Duncan$income,Duncan$education)
View(X)
solve(t(X) %*% X) %*% t(X) %*% y
b<-solve(t(X) %*% X) %*% t(X) %*% y
X %*% b
X %*% b - y
e <- y - X %*% b
e %*% t(e)
e
t(e)
t(e) %*% e
t(e) %*% e * solve(t(X) %*% X)
solve(t(X) %*% X)
solve(t(X) %*% X) * 7506.699
lse <- lm(prestige ~ income + education, data=Duncan)
summary(lse)
solve(t(X) %*% X) * sqrt(7506.699)
Xstar <- scale(X[,c(2,3)], scale=c(F,F)) # centering only, not full standardization
ystar <- scale(y, center=T, scale=F)
Xstar <- scale(X[,c(2,3)], scale=c(F,F)) # centering only, not full standardization
ystar <- scale(y, center=T, scale=F)
(solve(t(Xstar) %*% Xstar))  * sqrt(7506.699)
Xstar <- scale(X[,c(2,3)], scale=c(F,F)) # centering only, not full standardization
ystar <- scale(y, center=T, scale=F)
(solve(t(Xstar) %*% Xstar))  * 7506.699
solve(t(X) %*% X) * 7506.699
solve(t(X) %*% X) * 7506.699/42
0.009653582*0.009653582
0.09825*0.09825
0.11967*0.11967
4.27194*4.27194
